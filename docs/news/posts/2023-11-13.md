---
date: 2023-11-13
categories:
  - Announcements
---

# Changes to scratch storage policies

Research Computing is making policy changes regarding scratch storage organization and retention. This is in response to the increasing needs of users, and represent best practice.

!!! info "Policy updates"
    - User scratch directories (/scratch/u/...) will be deleted
    - Files in scratch that are older than 90 days will be automatically deleted

<!-- more -->

## User scratch removal

Research Computing will no longer provide user scratch directories. For reference, these directories have been located at `/scratch/u/NetID`. This is a response to user feedback about confusion over purpose of user vs. group scratch. Additionally, we have found that group scratch is more heavily utilized, and more actively utilized, i.e., less old data. We encourage all users to cleanup their user scratch data immediately. Research Computing will **begin deleting these directories on February 1, 2024**.

!!! info "User software"
    In response to user feedback, we are increasing the size of user home directories from 50GiB to 100GiB to accomodate relocation of user-installed software from user scratch to home directory. This change is **effective December 1, 2023**.

## Scratch retention

Research Computing has had documented guidance for use of scratch storage in the HPC environment since the start of operations for the HPC cluster. This included a data deletion policy for old files in the scratch file system. Historically, we have not enforced this policy in any automated way. In fact, we have only emailed our MCW users to manually cleanup their scratch space when storage ran out. This has led to issues with users storing old data in scratch that is not needed and takes up valuable space meant for new jobs.

To fix these issues, Research Computing will begin deleting old scratch data with an automated script. The script will daily scan all files and directories in your scratch space and move any objects older than 90 days to a daily trash space. After 14 days, a daily trash space will expire and be deleted. This means that the scratch file system will be cleaned up every day, and you will have the opportunity to retrieve those old files for an additional 14 days.

This scratch retention process is **effective February 1, 2024**. For details, please review the [scratch retention](../../storage/rcc-storage.md#retention) information.

## FAQ

??? question "How do I know the age of my files?"
    Short answer, it is your responsbility to know. The scratch file system is not for regular data storage. It is only to be used for storing data while a SLURM job is running. When the job finishes, you clean it up. There should never be a time where old data exists in your scratch folder. In this way, you can avoid a situation where you do not know or remember the age of a file.

    However, to deal with reality that most users don't use scratch properly, we have command-line tools. 

    To list files in a directory ordered by age from top to bottom:

    ```bash
    ls -latr
    ```

    To find all files in a directory that have not been modified in the last 90 days:

    ```bash
    find /path/to/directory -mtime +90 
    ```

??? question "My PI does not have space in their group storage. Where do I store my user scratch data?"
    First, avoid this situation. Do not use scratch storage as a free general data storage. Do not use the cluster to generate results if you are not willing to store that data either in group storage, or some other lab solution.

    However, to deal with the reality that most users don't use scratch properly, you should discuss this issue with your PI. Group storage is available and higher quota limits can be purchased for $60/TB/year. Contact {{ support_email }} if you require assistance in discussing this issue.

??? question "I am a PI. How do I know if my past/present students have data stored in scratch that could be deleted?"
    Short answer, ask them. The best person to identify a piece of data is the person that generated it. If you cannot contact that person, contact {{ support_email }} to arrange a consultation.

??? question "I have data in scratch now. Will my data be deleted?"
    This depends on the age of your data and, again, it is your responsibility to know. Any data older than 90 days will be moved to a trash folder for another 14 days. After that time, it will be deleted. Avoid that situation by cleaning up your scratch folder early and often.

??? question "Is my scratch data backed up before you delete it?"
    No, data in `/scratch` is not backed up, replicated, snapshotted, or protected by any other means. Again, this is temporary space only for data being processed in a SLURM job. Do not leave your data in scratch where it may be deleted or lost. Clean it up early and often by transferring results to group storage.
